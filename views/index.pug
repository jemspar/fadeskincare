extends layout

block scripts
  script(src="/javascripts/index.js")
  script(src="/javascripts/showdown.min.js")
  script(src="/javascripts/process_desc.js")

block cart_summary
  a(href="/cart")
    h3#cart_link
      | cart: 
      span#cart_items= cart.totalQty
      |  items

block content
  each prod in products
    if prod.available
      script(type="application/ld+json").
        {
          "@context": "https://schema.org/",
          "@type": "Product",
          "name": "#{prod.name}",
          "offers": {
            "@type" : "Offer",
            "price" : "#{prod.price}",
            "priceCurrency" : "USD"
          },
          "image" : "https://fadeskincare.co/#{prod.imagePath}",
          "brand" : {
            "@type" : "Brand",
            "name" : "FADE skincare"
          },
          "availability" : "InStock",
          "url" : "https://fadeskincare.co/product/#{prod.slug}",
        }
      div(class='product' id=prod._id)
        h2(class="name")
          a(href="/product/"+prod.slug)= prod.name
        div(style="display:none")
          meta(content=prod.price)
          meta(content="USD")
          meta(content="InStock")
        img(src="/"+prod.imagePath, class="prodImg" alt="product image of "+prod.name)
        .description
          h3.price
            | $ 
            = prod.price   
          button(onClick="addToCart(\"" + prod._id + "\")").add_to_cart
            | Add to cart
          span.added
            img(src="/images/shooting-star.png", alt="shooting star emoji")
            | added to cart!
          br
          if prod.descriptionPath
            script.
              processDescription("#{prod._id}", "#{prod.descriptionPath}");
          else
            | No description available.

